(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[886],{131:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o});var t=a(6814),s=a(6271),l=a(217),d=a(2094),n=a(6177),c=a(7363),i=a(6979);function o(){let[e,r]=(0,d.useState)(""),[a,o]=(0,d.useState)("all"),[g,x]=(0,d.useState)("createdAt"),[u,h]=(0,d.useState)("desc"),[m,b]=(0,d.useState)(1),[y,p]=(0,d.useState)(10),v=(0,s.kk)(()=>l.db.receipts.toArray(),[],[]),k=(0,s.kk)(()=>l.db.transactions.toArray(),[],[]),f=(0,s.kk)(()=>l.db.categories.toArray(),[],[]),j=(0,d.useMemo)(()=>{if(!v)return[];let r=v.filter(r=>{let t=""===e||r.fn.toLowerCase().includes(e.toLowerCase())||r.i.toLowerCase().includes(e.toLowerCase())||r.s.toLowerCase().includes(e.toLowerCase()),s=!0;return"with-transaction"===a?s=void 0!==r.transactionId:"without-transaction"===a&&(s=void 0===r.transactionId),t&&s});return r.sort((e,r)=>{let a,t;switch(g){case"amount":a=parseFloat(e.s)||0,t=parseFloat(r.s)||0;break;case"timestamp":a=e.t,t=r.t;break;case"fiscalNumber":a=e.fn,t=r.fn;break;default:a=e.createdAt||new Date(0),t=r.createdAt||new Date(0)}return"asc"===u?a>t?1:-1:a<t?1:-1}),r},[v,e,a,g,u]),N=Math.ceil(j.length/y),w=(m-1)*y,C=w+y,A=j.slice(w,C),F=e=>{try{let r=e.substring(0,4),a=e.substring(4,6),t=e.substring(6,8),s=e.substring(9,11),l=e.substring(11,13);return"".concat(r,"-").concat(a,"-").concat(t," ").concat(s,":").concat(l)}catch(r){return e}},P=e=>{if(!e.transactionId||!k)return null;let r=k.find(r=>r.id===e.transactionId);if(!r)return null;let a=null==f?void 0:f.find(e=>e.id===r.categoryId);return{transaction:r,category:(null==a?void 0:a.name)||"Unknown Category"}};return(0,t.jsx)("div",{className:i.Z,children:(0,t.jsxs)("div",{className:i.zi,children:[(0,t.jsx)("h1",{className:i.uQ,children:"Receipts"}),(0,t.jsx)(n.A,{searchTerm:e,onSearchChange:e=>{r(e),b(1)},searchPlaceholder:"Search by fiscal number, receipt ID, or amount...",filterValue:a,onFilterChange:e=>{o(e),b(1)},filterOptions:[{value:"all",label:"All Receipts"},{value:"with-transaction",label:"With Transaction"},{value:"without-transaction",label:"Without Transaction"}],filterLabel:"Type",sortValue:"".concat(g,"-").concat(u),onSortChange:e=>{let[r,a]=e.split("-");x(r),h(a),b(1)},sortOptions:[{value:"createdAt",label:"Created Date"},{value:"amount",label:"Amount"},{value:"timestamp",label:"Receipt Time"},{value:"fiscalNumber",label:"Fiscal Number"}].map(e=>({value:"".concat(e.value,"-").concat(u),label:"".concat(e.label," ").concat("asc"===u?"↑":"↓")})),accentColor:"orange"}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow dark:shadow-gray-900/50",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold p-6 border-b border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white",children:"Your Receipts"}),A&&A.length>0?(0,t.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:A.map(e=>{let r=P(e);return(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-center",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Fiscal Number"}),(0,t.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.fn})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receipt ID"}),(0,t.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.i})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Amount"}),(0,t.jsx)("div",{className:"font-bold text-lg text-orange-600 dark:text-orange-400",children:parseFloat(e.s).toFixed(2)})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Timestamp"}),(0,t.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:F(e.t)})]}),r&&(0,t.jsxs)("div",{className:"md:col-span-2 lg:col-span-4 space-y-2",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Linked Transaction"}),(0,t.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Payer/Payee:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-900 dark:text-white",children:r.transaction.payerPayee||"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Category:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-900 dark:text-white",children:r.category})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Amount:"}),(0,t.jsxs)("span",{className:"ml-2 font-medium ".concat("incoming"===r.transaction.direction?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["incoming"===r.transaction.direction?"+":"-",r.transaction.amount.toFixed(2)]})]})]})})]})]})},e.id)})}):(0,t.jsx)("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:0===j.length?"No receipts found.":"No receipts on this page."}),(0,t.jsx)(c.A,{currentPage:m,totalPages:N,totalItems:j.length,itemsPerPage:y,onPageChange:b,onItemsPerPageChange:p,startIndex:w,endIndex:C,accentColor:"orange"})]})]})})}},4952:(e,r,a)=>{Promise.resolve().then(a.bind(a,131))},6177:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});var t=a(6814);function s(e){let{searchTerm:r,onSearchChange:a,searchPlaceholder:s="Search...",filterValue:l,onFilterChange:d,filterOptions:n,filterLabel:c="Filter by",secondaryFilterValue:i,onSecondaryFilterChange:o,secondaryFilterOptions:g,secondaryFilterLabel:x="Filter by",sortValue:u,onSortChange:h,sortOptions:m,sortLabel:b="Sort by",accentColor:y="purple",className:p=""}=e,v=()=>{switch(y){case"orange":return"focus:ring-orange-500 dark:focus:ring-orange-400";case"blue":return"focus:ring-blue-500 dark:focus:ring-blue-400";case"green":return"focus:ring-green-500 dark:focus:ring-green-400";default:return"focus:ring-purple-500 dark:focus:ring-purple-400"}},k=g&&o;return(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow dark:shadow-gray-900/50 p-6 mb-6 ".concat(p),children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 ".concat(k?"lg:grid-cols-5":"lg:grid-cols-4"," gap-4"),children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),(0,t.jsx)("input",{type:"text",id:"search",placeholder:s,value:r,onChange:e=>a(e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 ".concat(v()," focus:border-transparent")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"filter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:c}),(0,t.jsx)("select",{id:"filter",value:l,onChange:e=>d(e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 ".concat(v()," focus:border-transparent"),children:n.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),k&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"secondaryFilter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:x}),(0,t.jsx)("select",{id:"secondaryFilter",value:i,onChange:e=>o(e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 ".concat(v()," focus:border-transparent"),children:g.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"sort",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:b}),(0,t.jsx)("select",{id:"sort",value:u,onChange:e=>h(e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 ".concat(v()," focus:border-transparent"),children:m.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})})}a(2094)},7363:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});var t=a(6814);function s(e){let{currentPage:r,totalPages:a,totalItems:s,itemsPerPage:l,onPageChange:d,onItemsPerPageChange:n,startIndex:c,endIndex:i,accentColor:o="purple",className:g=""}=e;if(a<=1)return null;let x=()=>{switch(o){case"orange":return"focus:ring-orange-500 dark:focus:ring-orange-400 bg-orange-500 border-orange-500";case"blue":return"focus:ring-blue-500 dark:focus:ring-blue-400 bg-blue-500 border-blue-500";case"green":return"focus:ring-green-500 dark:focus:ring-green-400 bg-green-500 border-green-500";default:return"focus:ring-purple-500 dark:focus:ring-purple-400 bg-purple-500 border-purple-500"}};return(0,t.jsxs)("div",{className:"px-4 py-4 border-t border-gray-200 dark:border-gray-700 ".concat(g),children:[(0,t.jsxs)("div",{className:"md:hidden space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Show:"}),(0,t.jsxs)("select",{value:l,onChange:e=>{n(Number(e.target.value)),d(1)},className:"border border-gray-300 dark:border-gray-600 rounded px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 ".concat(x().split(" ")[0]," ").concat(x().split(" ")[1]),children:[(0,t.jsx)("option",{value:5,children:"5"}),(0,t.jsx)("option",{value:10,children:"10"}),(0,t.jsx)("option",{value:20,children:"20"}),(0,t.jsx)("option",{value:50,children:"50"})]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[c+1,"-",Math.min(i,s)," of ",s]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,t.jsx)("button",{onClick:()=>d(Math.max(1,r-1)),disabled:1===r,className:"flex-1 px-4 py-3 text-sm border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium",children:"← Previous"}),(0,t.jsx)("button",{onClick:()=>d(Math.min(a,r+1)),disabled:r===a,className:"flex-1 px-4 py-3 text-sm border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium",children:"Next →"})]})]}),(0,t.jsxs)("div",{className:"hidden md:flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Show:"}),(0,t.jsxs)("select",{value:l,onChange:e=>{n(Number(e.target.value)),d(1)},className:"border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 ".concat(x().split(" ")[0]," ").concat(x().split(" ")[1]),children:[(0,t.jsx)("option",{value:5,children:"5"}),(0,t.jsx)("option",{value:10,children:"10"}),(0,t.jsx)("option",{value:20,children:"20"}),(0,t.jsx)("option",{value:50,children:"50"})]}),(0,t.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"per page"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>d(Math.max(1,r-1)),disabled:1===r,className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Previous"}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:(()=>{let e=[];if(a<=5)for(let r=1;r<=a;r++)e.push(r);else if(r<=3){for(let r=1;r<=4;r++)e.push(r);e.push("..."),e.push(a)}else if(r>=a-2){e.push(1),e.push("...");for(let r=a-3;r<=a;r++)e.push(r)}else{e.push(1),e.push("...");for(let a=r-1;a<=r+1;a++)e.push(a);e.push("..."),e.push(a)}return e})().map((e,a)=>(0,t.jsx)("button",{onClick:()=>"number"==typeof e&&d(e),disabled:"..."===e,className:"px-3 py-1 text-sm border rounded ".concat(e===r?"".concat(x()," text-white"):"..."===e?"border-transparent text-gray-500 dark:text-gray-400 cursor-default":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:e},a))}),(0,t.jsx)("button",{onClick:()=>d(Math.min(a,r+1)),disabled:r===a,className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Next"})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[c+1,"-",Math.min(i,s)," of ",s]})]})]})}a(2094)}},e=>{var r=r=>e(e.s=r);e.O(0,[271,151,788,97,358],()=>r(4952)),_N_E=e.O()}]);