(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{217:(e,t,a)=>{"use strict";a.d(t,{db:()=>n});var r=a(1282);class d extends r.Ay{async addBudgetEntry(e){let t={...e,createdAt:new Date,updatedAt:new Date};return await this.budgetEntries.add(t)}async updateBudgetEntry(e,t){let a={...t,updatedAt:new Date};await this.budgetEntries.update(e,a)}async deleteBudgetEntry(e){await this.categories.where("budgetId").equals(e).delete(),await this.budgetEntries.delete(e)}async addCategory(e){let t={...e,createdAt:new Date,updatedAt:new Date};return await this.categories.add(t)}async updateCategory(e,t){let a={...t,updatedAt:new Date};await this.categories.update(e,a)}async deleteCategory(e){await this.transactions.where("categoryId").equals(e).modify({categoryId:0}),await this.categories.delete(e)}async getCategoriesByBudget(e){return await this.categories.where("budgetId").equals(e).toArray()}async addTransaction(e){let t={...e,createdAt:new Date,updatedAt:new Date};return await this.transactions.add(t)}async updateTransaction(e,t){let a={...t,updatedAt:new Date};await this.transactions.update(e,a)}async deleteTransaction(e){await this.receipts.where("transactionId").equals(e).modify({transactionId:void 0}),await this.transactions.delete(e)}async getTransactionsByCategory(e){return await this.transactions.where("categoryId").equals(e).toArray()}async getTransactionsByDateRange(e,t){return await this.transactions.where("date").between(e,t).toArray()}async addReceipt(e){let t={...e,createdAt:new Date,updatedAt:new Date};return await this.receipts.add(t)}async updateReceipt(e,t){let a={...t,updatedAt:new Date};await this.receipts.update(e,a)}async deleteReceipt(e){await this.transactions.where("receiptId").equals(e).modify({receiptId:void 0}),await this.receipts.delete(e)}async getReceiptByTransaction(e){return await this.receipts.where("transactionId").equals(e).first()}async getTransactionWithDetails(e){let t=await this.transactions.get(e);if(!t)return;let a=await this.categories.get(t.categoryId),r=t.receiptId?await this.receipts.get(t.receiptId):void 0;return{transaction:t,category:a,receipt:r}}async getBudgetWithCategories(e){let t=await this.budgetEntries.get(e);if(t)return{budget:t,categories:await this.getCategoriesByBudget(e)}}constructor(){super("FinanceDatabase"),this.version(1).stores({budgetEntries:"++id, name, amount, createdAt, updatedAt",categories:"++id, name, description, budgetId, createdAt, updatedAt",transactions:"++id, date, categoryId, payerPayee, amount, direction, receiptId, createdAt, updatedAt",receipts:"++id, t, s, fn, i, fp, n, transactionId, createdAt, updatedAt"}),this.version(2).stores({budgetEntries:"++id, name, amount, createdAt, updatedAt",categories:"++id, name, description, budgetId, createdAt, updatedAt",transactions:"++id, date, categoryId, payerPayee, amount, direction, receiptId, createdAt, updatedAt, [categoryId+date]",receipts:"++id, t, s, fn, i, fp, n, transactionId, createdAt, updatedAt"})}}let n=new d},3159:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(6814),d=a(2094),n=a(217),s=a(6271);function i(){let[e,t]=(0,d.useState)({date:new Date().toISOString().split("T")[0],categoryId:0,payerPayee:"",amount:0,comment:"",direction:"outgoing"}),[a,i]=(0,d.useState)(null),[c,o]=(0,d.useState)(null),l=(0,s.kk)(()=>n.db.transactions.toArray(),[],[]),u=(0,s.kk)(()=>n.db.categories.toArray(),[],[]);async function g(a){if(a.preventDefault(),e.payerPayee.trim()&&!(e.amount<=0)&&!(e.categoryId<=0))try{let a={...e,date:new Date(e.date)};await n.db.addTransaction(a),t({date:new Date().toISOString().split("T")[0],categoryId:0,payerPayee:"",amount:0,comment:"",direction:"outgoing"}),o("Transaction added successfully!"),setTimeout(()=>o(null),3e3)}catch(e){console.error("Error adding transaction:",e),i("Failed to add transaction")}}async function p(e){try{await n.db.deleteTransaction(e),o("Transaction deleted successfully!"),setTimeout(()=>o(null),3e3)}catch(e){console.error("Error deleting transaction:",e),i("Failed to delete transaction")}}return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 pb-20 md:pb-0 md:pt-16",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Transactions"}),a&&(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:a}),c&&(0,r.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:c}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add New Transaction"}),(0,r.jsxs)("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,r.jsx)("input",{type:"date",value:e.date,onChange:a=>t({...e,date:a.target.value}),className:"border border-gray-300 rounded px-3 py-2",required:!0}),(0,r.jsxs)("select",{value:e.categoryId,onChange:a=>t({...e,categoryId:parseInt(a.target.value)||0}),className:"border border-gray-300 rounded px-3 py-2",required:!0,children:[(0,r.jsx)("option",{value:0,children:"Select Category"}),u&&u.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,r.jsx)("input",{type:"text",placeholder:"Payer/Payee",value:e.payerPayee,onChange:a=>t({...e,payerPayee:a.target.value}),className:"border border-gray-300 rounded px-3 py-2",required:!0}),(0,r.jsx)("input",{type:"number",placeholder:"Amount",value:e.amount,onChange:a=>t({...e,amount:parseFloat(a.target.value)||0}),className:"border border-gray-300 rounded px-3 py-2",step:"0.01",required:!0}),(0,r.jsxs)("select",{value:e.direction,onChange:a=>t({...e,direction:a.target.value}),className:"border border-gray-300 rounded px-3 py-2",required:!0,children:[(0,r.jsx)("option",{value:"outgoing",children:"Outgoing"}),(0,r.jsx)("option",{value:"incoming",children:"Incoming"})]}),(0,r.jsx)("input",{type:"text",placeholder:"Comment (optional)",value:e.comment,onChange:a=>t({...e,comment:a.target.value}),className:"border border-gray-300 rounded px-3 py-2"}),(0,r.jsx)("button",{type:"submit",className:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700",children:"Add Transaction"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold p-6 border-b",children:"Your Transactions"}),l&&l.length>0?(0,r.jsx)("div",{className:"divide-y",children:l.map(e=>{var t;return(0,r.jsxs)("div",{className:"p-6 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"font-semibold text-lg",children:e.payerPayee}),(0,r.jsxs)("span",{className:"px-2 py-1 rounded text-sm font-medium ".concat("incoming"===e.direction?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:["$",e.amount.toFixed(2)]}),(0,r.jsx)("span",{className:"text-gray-500",children:u&&(null==(t=u.find(t=>t.id===e.categoryId))?void 0:t.name)})]}),e.comment&&(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:e.comment}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:new Date(e.date).toLocaleDateString()})]}),(0,r.jsx)("button",{onClick:()=>e.id&&p(e.id),className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 text-sm",children:"Delete"})]},e.id)})}):(0,r.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No transactions found. Add your first transaction above."})]})]})})}},9752:(e,t,a)=>{Promise.resolve().then(a.bind(a,3159))}},e=>{var t=t=>e(e.s=t);e.O(0,[271,788,97,358],()=>t(9752)),_N_E=e.O()}]);