(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{6915:(e,r,a)=>{Promise.resolve().then(a.bind(a,7078))},7078:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>n});var t=a(6814),d=a(2094),s=a(217),i=a(6271),o=a(6979);function n(){let[e,r]=(0,d.useState)({name:"",description:"",budgetId:0}),[a,n]=(0,d.useState)(null),[l,g]=(0,d.useState)({name:"",description:"",budgetId:0}),[c,u]=(0,d.useState)(null),[b,y]=(0,d.useState)(null),h=(0,i.kk)(()=>s.db.categories.toArray(),[],[]),x=(0,i.kk)(()=>s.db.budgetEntries.toArray(),[],[]);async function p(a){if(a.preventDefault(),e.name.trim()&&e.description.trim()&&!(e.budgetId<=0))try{await s.db.addCategory(e),(async()=>{try{let e=await s.db.getDefaultSettings();r({name:"",description:"",budgetId:e.defaultBudgetId||0})}catch(e){console.error("Failed to reset form with default budget:",e),r({name:"",description:"",budgetId:0})}})(),y("Category added successfully!"),setTimeout(()=>y(null),o.Ez)}catch(e){console.error("Error adding category:",e),u("Failed to add category")}}(0,d.useEffect)(()=>{(async()=>{try{let e=await s.db.getDefaultSettings();e.defaultBudgetId>0&&r(r=>({...r,budgetId:e.defaultBudgetId}))}catch(e){console.error("Failed to load default budget setting:",e)}})()},[]);let m=e=>{n(e),g({name:e.name,description:e.description,budgetId:e.budgetId})},k=async e=>{if(e.preventDefault(),(null==a?void 0:a.id)&&l.name.trim()&&l.description.trim()&&!(l.budgetId<=0))try{await s.db.updateCategory(a.id,l),n(null),y("Category updated successfully!"),setTimeout(()=>y(null),o.Ez)}catch(e){console.error("Error updating category:",e),u("Failed to update category")}},v=()=>{n(null),g({name:"",description:"",budgetId:0})};async function N(e){try{await s.db.deleteCategory(e),y("Category deleted successfully!"),setTimeout(()=>y(null),o.Ez)}catch(e){console.error("Error deleting category:",e),u("Failed to delete category")}}return(0,t.jsx)("div",{className:o.Z,children:(0,t.jsxs)("div",{className:o.zi,children:[(0,t.jsx)("h1",{className:o.uQ,children:"Categories"}),c&&(0,t.jsx)("div",{className:"bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded mb-6",children:c}),b&&(0,t.jsx)("div",{className:"bg-green-100 dark:bg-green-900/20 border border-green-400 dark:border-green-800 text-green-700 dark:text-green-400 px-4 py-3 rounded mb-6",children:b}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow dark:shadow-gray-900/50 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Add New Category"}),(0,t.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Category Name",value:e.name,onChange:a=>r({...e,name:a.target.value}),className:"border border-gray-300 dark:border-gray-600 rounded px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",required:!0}),(0,t.jsx)("input",{type:"text",placeholder:"Description",value:e.description,onChange:a=>r({...e,description:a.target.value}),className:"border border-gray-300 dark:border-gray-600 rounded px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",required:!0}),(0,t.jsxs)("select",{value:e.budgetId,onChange:a=>r({...e,budgetId:parseInt(a.target.value)||0}),className:"border border-gray-300 dark:border-gray-600 rounded px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0,children:[(0,t.jsx)("option",{value:0,children:"Select Budget"}),x&&x.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsx)("button",{type:"submit",className:"bg-green-600 dark:bg-green-500 text-white px-6 py-2 rounded hover:bg-green-700 dark:hover:bg-green-600 transition-colors duration-200",children:"Add Category"})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow dark:shadow-gray-900/50",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold p-6 border-b border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white",children:"Your Categories"}),h&&h.length>0?(0,t.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:h.map(e=>{var r;return(0,t.jsx)("div",{className:"p-6",children:(null==a?void 0:a.id)===e.id?(0,t.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Category Name",value:l.name,onChange:e=>g({...l,name:e.target.value}),className:"border border-gray-300 dark:border-gray-600 rounded px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",required:!0}),(0,t.jsx)("input",{type:"text",placeholder:"Description",value:l.description,onChange:e=>g({...l,description:e.target.value}),className:"border border-gray-300 dark:border-gray-600 rounded px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",required:!0}),(0,t.jsxs)("select",{value:l.budgetId,onChange:e=>g({...l,budgetId:parseInt(e.target.value)||0}),className:"border border-gray-300 dark:border-gray-600 rounded px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0,children:[(0,t.jsx)("option",{value:0,children:"Select Budget"}),x&&x.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"submit",className:"bg-green-600 dark:bg-green-500 text-white px-4 py-2 rounded hover:bg-green-700 dark:hover:bg-green-600 transition-colors duration-200",children:"Save Changes"}),(0,t.jsx)("button",{type:"button",onClick:v,className:"bg-gray-600 dark:bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-700 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"})]})]}):(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:e.description}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Budget: ",x&&(null==(r=x.find(r=>r.id===e.budgetId))?void 0:r.name)||"Unknown"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Created: ",e.createdAt?new Date(e.createdAt).toLocaleDateString():"Unknown"]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>m(e),className:"bg-blue-600 dark:bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors duration-200",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>e.id&&N(e.id),className:"bg-red-600 dark:bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700 dark:hover:bg-red-600 transition-colors duration-200",children:"Delete"})]})]})},e.id)})}):(0,t.jsx)("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"No categories found. Create your first category above."})]})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[271,151,788,97,358],()=>r(6915)),_N_E=e.O()}]);